FvS$Gender <- "F"
FvN$Gender <- "F"
GenderPleasant <- rbind(MvP, FvP)
GenderUnpleasant <- rbind(MvU, FvU)
STEM <- rbind(MvS, FvS)
NonSTEM <- rbind(MvN, FvN)
View(STEM)
GenderPleasant <- GenderPleasant %>%
select(Name, Gender, everything())
GenderUnpleasant <- GenderUnpleasant %>%
select(Name, Gender, everything())
STEM <- STEM %>%
select(Name, Gender, everything())
NonSTEM <- NonSTEM %>%
select(Name, Gender, everything())
View(STEM)
# Create an empty dataframe to store the results
GenderUnpleasant_New <- data.frame(Name = character(), Gender = character(), Word = character(), CosineSimilarity = numeric(), stringsAsFactors = FALSE)
# Loop through each row in the original dataframe
for (i in 1:nrow(GenderUnpleasant)) {
# Extract Name and Race values
name <- GenderUnpleasant$Name[i]
gender <- GenderUnpleasant$Gender[i]
# Loop through the other 10 attributes
for (j in 3:ncol(GenderUnpleasant)) {  # Assuming the other attributes start from the third column
word <- names(GenderUnpleasant)[j]
# Calculate cosine similarity
similarity <- GenderUnpleasant[i, j]
# Add a new row to the new dataframe
GenderUnpleasant_New <- rbind(Unpleasant_New, data.frame(Name = name, Gender = gender, Word = word, CosineSimilarity = similarity))
}
}
# Reset row names and convert CosineSimilarity to numeric
rownames(GenderUnpleasant_New) <- NULL
GenderUnpleasant_New$CosineSimilarity <- as.numeric(GenderUnpleasant_New$CosineSimilarity)
# Rename columns for clarity
colnames(GenderUnpleasant_New) <- c("Name", "Race", "Word", "CosineSimilarity")
View(GenderUnpleasant)
# Create an empty dataframe to store the results
GenderUnpleasant_New <- data.frame(Name = character(), Gender = character(), Word = character(), CosineSimilarity = numeric(), stringsAsFactors = FALSE)
# Loop through each row in the original dataframe
for (i in 1:nrow(GenderUnpleasant)) {
# Extract Name and Race values
name <- GenderUnpleasant$Name[i]
gender <- GenderUnpleasant$Gender[i]
# Loop through the other 10 attributes
for (j in 3:ncol(GenderUnpleasant)) {  # Assuming the other attributes start from the third column
word <- names(GenderUnpleasant)[j]
# Calculate cosine similarity
similarity <- GenderUnpleasant[i, j]
# Add a new row to the new dataframe
GenderUnpleasant_New <- rbind(GenderUnpleasant_New, data.frame(Name = name, Gender = gender, Word = word, CosineSimilarity = similarity))
}
}
# Reset row names and convert CosineSimilarity to numeric
rownames(GenderUnpleasant_New) <- NULL
GenderUnpleasant_New$CosineSimilarity <- as.numeric(GenderUnpleasant_New$CosineSimilarity)
# Rename columns for clarity
colnames(GenderUnpleasant_New) <- c("Name", "Race", "Word", "CosineSimilarity")
View(GenderUnpleasant_New)
GenderUnpleasant_New$Good_or_Bad <- "Bad"
View(GenderUnpleasant_New)
# Create an empty dataframe to store the results
GenderPleasant_New <- data.frame(Name = character(), Gender = character(), Word = character(), CosineSimilarity = numeric(), stringsAsFactors = FALSE)
# Loop through each row in the original dataframe
for (i in 1:nrow(GenderPleasant)) {
# Extract Name and Race values
name <- GenderPleasant$Name[i]
gender <- GenderPleasant$Gender[i]
# Loop through the other 10 attributes
for (j in 3:ncol(GenderPleasant)) {  # Assuming the other attributes start from the third column
word <- names(GenderPleasant)[j]
# Calculate cosine similarity
similarity <- GenderPleasant[i, j]
# Add a new row to the new dataframe
GenderPleasant_New <- rbind(GenderPleasant_New, data.frame(Name = name, Gender = gender, Word = word, CosineSimilarity = similarity))
}
}
# Reset row names and convert CosineSimilarity to numeric
rownames(GenderPleasant_New) <- NULL
GenderPleasant_New$CosineSimilarity <- as.numeric(GenderPleasant_New$CosineSimilarity)
# Rename columns for clarity
colnames(GenderPleasant_New) <- c("Name", "Race", "Word", "CosineSimilarity")
GenderPleasant_New$Good_or_Bad <- "Good"
#############
# GenderGoB #
#############
GenderGoBWithinModel <- rbind(GenderPleasant_New, GenderUnpleasant_New)
View(GenderGoBWithinModel)
View(GenderUnpleasant_New)
View(GenderUnpleasant_New)
# Rename columns for clarity
colnames(GenderUnpleasant_New) <- c("Name", "Gender", "Word", "CosineSimilarity")
View(GenderUnpleasant_New)
GenderUnpleasant_New$Good_or_Bad <- "Bad"
View(GenderUnpleasant_New)
library(tidyverse)
##########
#        #
#  Race  #
#        #
##########
AFvU <- read.csv("AFvU.csv")
AFvP <- read.csv("AFvP.csv")
EUvU <- read.csv("EUvU.csv")
EUvP <- read.csv("EUvP.csv")
LXvU <- read.csv("LXvU.csv")
LXvP <- read.csv("LXvP.csv")
CHvU <- read.csv("CHvU.csv")
CHvP <- read.csv("CHvP.csv")
colnames(AFvP)[1] <- "Name"
colnames(AFvU)[1] <- "Name"
colnames(EUvP)[1] <- "Name"
colnames(EUvU)[1] <- "Name"
colnames(LXvP)[1] <- "Name"
colnames(LXvU)[1] <- "Name"
colnames(CHvP)[1] <- "Name"
colnames(CHvU)[1] <- "Name"
AFvP$Race <- "Black"
AFvU$Race <- "Black"
EUvP$Race <- "White"
EUvU$Race <- "White"
LXvP$Race <- "Latinx"
LXvU$Race <- "Latinx"
CHvP$Race <- "Chinese"
CHvU$Race <- "Chinese"
Pleasant <- rbind(AFvP, EUvP, LXvP, CHvP)
Unpleasant <- rbind(AFvU, EUvU, LXvU, CHvU)
Pleasant <- Pleasant %>%
select(Name, Race, everything())
Unpleasant <- Unpleasant %>%
select(Name, Race, everything())
################
# Pleasant_new #
################
# Install and load the required packages
library(stringdist)
# Create an empty dataframe to store the results
Pleasant_New <- data.frame(Name = character(), Race = character(), Word = character(), CosineSimilarity = numeric(), stringsAsFactors = FALSE)
# Loop through each row in the original dataframe
for (i in 1:nrow(Pleasant)) {
# Extract Name and Race values
name <- Pleasant$Name[i]
race <- Pleasant$Race[i]
# Loop through the other 10 attributes
for (j in 3:ncol(Pleasant)) {  # Assuming the other attributes start from the third column
word <- names(Pleasant)[j]
# Calculate cosine similarity
similarity <- Pleasant[i, j]
# Add a new row to the new dataframe
Pleasant_New <- rbind(Pleasant_New, data.frame(Name = name, Race = race, Word = word, CosineSimilarity = similarity))
}
}
# Reset row names and convert CosineSimilarity to numeric
rownames(Pleasant_New) <- NULL
Pleasant_New$CosineSimilarity <- as.numeric(Pleasant_New$CosineSimilarity)
# Rename columns for clarity
colnames(Pleasant_New) <- c("Name", "Race", "Word", "CosineSimilarity")
##################
# Unpleasant_new #
##################
# Create an empty dataframe to store the results
Unpleasant_New <- data.frame(Name = character(), Race = character(), Word = character(), CosineSimilarity = numeric(), stringsAsFactors = FALSE)
# Loop through each row in the original dataframe
for (i in 1:nrow(Unpleasant)) {
# Extract Name and Race values
name <- Unpleasant$Name[i]
race <- Unpleasant$Race[i]
# Loop through the other 10 attributes
for (j in 3:ncol(Unpleasant)) {  # Assuming the other attributes start from the third column
word <- names(Unpleasant)[j]
# Calculate cosine similarity
similarity <- Unpleasant[i, j]
# Add a new row to the new dataframe
Unpleasant_New <- rbind(Unpleasant_New, data.frame(Name = name, Race = race, Word = word, CosineSimilarity = similarity))
}
}
# Reset row names and convert CosineSimilarity to numeric
rownames(Unpleasant_New) <- NULL
Unpleasant_New$CosineSimilarity <- as.numeric(Unpleasant_New$CosineSimilarity)
# Rename columns for clarity
colnames(Unpleasant_New) <- c("Name", "Race", "Word", "CosineSimilarity")
# Add good or bad column and rbind() to create final Race dataset
Pleasant_New$Good_or_Bad <- "Good"
Unpleasant_New$Good_or_Bad <- "Bad"
RaceWithinModel <- rbind(Pleasant_New, Unpleasant_New)
write.csv(RaceWithinModel, "BERT_base_cased_Race.csv", row.names = FALSE)
##########
#        #
# Gender #
#        #
##########
MvU <- read.csv("MvU.csv")
MvP <- read.csv("MvP.csv")
FvU <- read.csv("FvU.csv")
FvP <- read.csv("FvP.csv")
MvS <- read.csv("MvS.csv")
MvN <- read.csv("MvN.csv")
FvS <- read.csv("FvS.csv")
FvN <- read.csv("FvN.csv")
colnames(MvU)[1] <- "Name"
colnames(MvP)[1] <- "Name"
colnames(FvU)[1] <- "Name"
colnames(FvP)[1] <- "Name"
colnames(MvS)[1] <- "Name"
colnames(MvN)[1] <- "Name"
colnames(FvS)[1] <- "Name"
colnames(FvN)[1] <- "Name"
MvU$Gender <- "M"
MvP$Gender <- "M"
FvU$Gender <- "F"
FvP$Gender <- "F"
MvS$Gender <- "M"
MvN$Gender <- "M"
FvS$Gender <- "F"
FvN$Gender <- "F"
GenderPleasant <- rbind(MvP, FvP)
GenderUnpleasant <- rbind(MvU, FvU)
STEM <- rbind(MvS, FvS)
NonSTEM <- rbind(MvN, FvN)
GenderPleasant <- GenderPleasant %>%
select(Name, Gender, everything())
GenderUnpleasant <- GenderUnpleasant %>%
select(Name, Gender, everything())
STEM <- STEM %>%
select(Name, Gender, everything())
NonSTEM <- NonSTEM %>%
select(Name, Gender, everything())
########################
# GenderUnpleasant_new #
########################
# Create an empty dataframe to store the results
GenderUnpleasant_New <- data.frame(Name = character(), Gender = character(), Word = character(), CosineSimilarity = numeric(), stringsAsFactors = FALSE)
# Loop through each row in the original dataframe
for (i in 1:nrow(GenderUnpleasant)) {
# Extract Name and Race values
name <- GenderUnpleasant$Name[i]
gender <- GenderUnpleasant$Gender[i]
# Loop through the other 10 attributes
for (j in 3:ncol(GenderUnpleasant)) {  # Assuming the other attributes start from the third column
word <- names(GenderUnpleasant)[j]
# Calculate cosine similarity
similarity <- GenderUnpleasant[i, j]
# Add a new row to the new dataframe
GenderUnpleasant_New <- rbind(GenderUnpleasant_New, data.frame(Name = name, Gender = gender, Word = word, CosineSimilarity = similarity))
}
}
# Reset row names and convert CosineSimilarity to numeric
rownames(GenderUnpleasant_New) <- NULL
GenderUnpleasant_New$CosineSimilarity <- as.numeric(GenderUnpleasant_New$CosineSimilarity)
# Rename columns for clarity
colnames(GenderUnpleasant_New) <- c("Name", "Gender", "Word", "CosineSimilarity")
GenderUnpleasant_New$Good_or_Bad <- "Bad"
######################
# GenderPleasant_new #
######################
# Create an empty dataframe to store the results
GenderPleasant_New <- data.frame(Name = character(), Gender = character(), Word = character(), CosineSimilarity = numeric(), stringsAsFactors = FALSE)
# Loop through each row in the original dataframe
for (i in 1:nrow(GenderPleasant)) {
# Extract Name and Race values
name <- GenderPleasant$Name[i]
gender <- GenderPleasant$Gender[i]
# Loop through the other 10 attributes
for (j in 3:ncol(GenderPleasant)) {  # Assuming the other attributes start from the third column
word <- names(GenderPleasant)[j]
# Calculate cosine similarity
similarity <- GenderPleasant[i, j]
# Add a new row to the new dataframe
GenderPleasant_New <- rbind(GenderPleasant_New, data.frame(Name = name, Gender = gender, Word = word, CosineSimilarity = similarity))
}
}
# Reset row names and convert CosineSimilarity to numeric
rownames(GenderPleasant_New) <- NULL
GenderPleasant_New$CosineSimilarity <- as.numeric(GenderPleasant_New$CosineSimilarity)
# Rename columns for clarity
colnames(GenderPleasant_New) <- c("Name", "Gender", "Word", "CosineSimilarity")
GenderPleasant_New$Good_or_Bad <- "Good"
#############
# GenderGoB #
#############
GenderGoBWithinModel <- rbind(GenderPleasant_New, GenderUnpleasant_New)
View(GenderGoBWithinModel)
source("C:/Users/Ryan Ackerman/Desktop/Spring 2023/SoDA 496/SoDA496Project/CapStone/BERT_base_cased/BERT_base_cased_data_manipulation.R")
View(STEM_New)
source("C:/Users/Ryan Ackerman/Desktop/Spring 2023/SoDA 496/SoDA496Project/CapStone/BERT_base_cased/BERT_base_cased_data_manipulation.R")
rm(list = ls())
STEMWithinModel <- rbind(STEM_New, NonSTEM_New)
source("C:/Users/Ryan Ackerman/Desktop/Spring 2023/SoDA 496/SoDA496Project/CapStone/BERT_base_cased/BERT_base_cased_data_manipulation.R")
View(GenderWithinModel)
source("C:/Users/Ryan Ackerman/Desktop/Spring 2023/SoDA 496/SoDA496Project/CapStone/BERT_base_cased/BERT_base_cased_data_manipulation.R")
install.packages(multcomp)
install.packages("MASS")
rm(list = ls())
Race <- read.csv("BERT_base_cased_Race.csv")
View(Race)
Gender <- read.csv("BERT_base_cased_Gender.csv")
Career <- read.csv("BERT_base_cased_Career.csv")
View(Race)
library(stargazer)
RaceANOVA <- aov(CosineSimilarity ~ Race, data = Race)
tukey_Race <- TukeyHSD(RaceANOVA)
stargazer(RaceANOVA, type = "text")
stargazer(tukey_Race)
RaceANOVA
tukey_Race
Race <- Race %>%
mutate(White = ifelse(Race = "White", 1, 0))
Race <- Race %>%
mutate(White = ifelse(Race == "White", 1, 0))
View(Race)
t_race = t.test(CosineSimilarity ~ White, data = Race)
t_race
source("C:/Users/Ryan Ackerman/Desktop/Spring 2023/SoDA 496/SoDA496Project/CapStone/BERT_base_cased/BERT_base_cased_Analysis.R")
Race <- read.csv("BERT_base_cased_Race.csv")
Gender <- read.csv("BERT_base_cased_Gender.csv")
Career <- read.csv("BERT_base_cased_Career.csv")
Race_P <- Race %>%
filter(Good_or_Bad == "Good")
Race_U <- Race %>%
filter(Good_or_Bad == "Bad")
########################
# Analysis of Variance #
########################
RacePANOVA <- aov(CosineSimilarity ~ Race, data = Race_P)
tukey_PR <- TukeyHSD(RacePANOVA)
RacePANOVA
tukey_PR
RaceUANOVA <- aov(CosineSimilarity ~ Race, data = Race_U)
tukey_UR <- TukeyHSD(RaceUANOVA)
RaceUANOVA
tukey_UR
WhiteP <- Race_P %>%
filter(Race == "White")
OtherP <- Race_U %>%
filter(Race != "White")
t_race <- t.test(WhiteP$CosineSimilarity, OtherP$CosineSimilarity)
t_race
source("C:/Users/Ryan Ackerman/Desktop/Spring 2023/SoDA 496/SoDA496Project/CapStone/BERT_base_cased/BERT_base_cased_Analysis.R")
Race <- read.csv("BERT_base_cased_Race.csv")
Gender <- read.csv("BERT_base_cased_Gender.csv")
Career <- read.csv("BERT_base_cased_Career.csv")
Race_P <- Race %>%
filter(Good_or_Bad == "Good")
Race_U <- Race %>%
filter(Good_or_Bad == "Bad")
RacePANOVA <- aov(CosineSimilarity ~ Race, data = Race_P)
tukey_PR <- TukeyHSD(RacePANOVA)
RacePANOVA
tukey_PR
# Save ANOVA results
anovaPR_results <- summary(RacePANOVA)
write.table(anovaPR_results, file = "RPanova.txt", quote = FALSE)
source("C:/Users/Ryan Ackerman/Desktop/Spring 2023/SoDA 496/SoDA496Project/CapStone/BERT_base_cased/BERT_base_cased_Analysis.R")
View(tukey_RP_table)
Race <- read.csv("BERT_base_cased_Race.csv")
Gender <- read.csv("BERT_base_cased_Gender.csv")
Career <- read.csv("BERT_base_cased_Career.csv")
Race_P <- Race %>%
filter(Good_or_Bad == "Good")
Race_U <- Race %>%
filter(Good_or_Bad == "Bad")
########################
# Analysis of Variance #
########################
RacePANOVA <- aov(CosineSimilarity ~ Race, data = Race_P)
tukey_PR <- TukeyHSD(RacePANOVA)
RacePANOVA
tukey_PR
# Save ANOVA results
anovaPR_results <- summary(RacePANOVA)
anovaPR_table <- as.data.frame(anovaPR_results$'Pr(>F)')
write.table(anovaPR_table, file = "RPanova.txt", quote = FALSE)
# Save Tukey HSD results
tukey_RP_table <- as.data.frame(tukey_PR$'Category'[, c("group1", "group2", "p adj")])
write.csv(tukey_RP_table, file = "tukey_RP_results.csv", row.names = FALSE)
Race <- read.csv("BERT_base_cased_Race.csv")
Gender <- read.csv("BERT_base_cased_Gender.csv")
Career <- read.csv("BERT_base_cased_Career.csv")
Race_P <- Race %>%
filter(Good_or_Bad == "Good")
Race_U <- Race %>%
filter(Good_or_Bad == "Bad")
########################
# Analysis of Variance #
########################
RacePANOVA <- aov(CosineSimilarity ~ Race, data = Race_P)
tukey_PR <- TukeyHSD(RacePANOVA)
RacePANOVA
tukey_PR
# Save ANOVA results
anovaPR_results <- summary(RacePANOVA)
anovaPR_table <- as.data.frame(anovaPR_results$'Pr(>F)')
write.table(anovaPR_table, file = "RPanova.txt", quote = FALSE)
# Save Tukey HSD results
tukey_RP_table <- as.data.frame(tukey_PR$'Category'[, c("group1", "group2", "p adj")])
write.csv(tukey_RP_table, file = "tukey_RP_results.csv", row.names = FALSE)
Race <- read.csv("BERT_base_cased_Race.csv")
Gender <- read.csv("BERT_base_cased_Gender.csv")
Career <- read.csv("BERT_base_cased_Career.csv")
Race_P <- Race %>%
filter(Good_or_Bad == "Good")
Race_U <- Race %>%
filter(Good_or_Bad == "Bad")
########################
# Analysis of Variance #
########################
RacePANOVA <- aov(CosineSimilarity ~ Race, data = Race_P)
tukey_PR <- TukeyHSD(RacePANOVA)
RacePANOVA
tukey_PR
RaceUANOVA <- aov(CosineSimilarity ~ Race, data = Race_U)
tukey_UR <- TukeyHSD(RaceUANOVA)
RaceUANOVA
tukey_UR
##########
# T-Test #
##########
WhiteP <- Race_P %>%
filter(Race == "White")
OtherP <- Race_U %>%
filter(Race != "White")
t_race <- t.test(WhiteP$CosineSimilarity, OtherP$CosineSimilarity)
t_race
list = list('Black','Latinx','Chinese')
for (i in list){
t_test_result <- t.test(WhiteP$CosineSimilarity, subset(OtherP, Race == i)$CosineSimilarity)
print(t_test_result)
}
View(Race)
rm(list = ls())
library(tidyverse)
library(MASS)
library(stargazer)
Race <- read.csv("BERT_base_cased_Race.csv")
reference_category <- "White"
Race$RaceFactor <- relevel(factor(Race$Race), ref = reference_category)
View(Race)
Race <- read.csv("BERT_base_cased_Race.csv")
Race$Race <- relevel(factor(Race$Race), ref = reference_category)
Race_P <- Race %>%
filter(Good_or_Bad == "Good")
Race_U <- Race %>%
filter(Good_or_Bad == "Bad")
model <- lm(CosineSimilarity ~ Race, data = Race_P)
model
summary(model)
install.packages("broom")
library(broom)
model <- lm(CosineSimilarity ~ Race, data = Race_P)
summary(model)
tidy_output <- tidy(model)
write.csv(tidy_output, "lm_output_test.csv", row.names = FALSE)
rm(list = ls())
Race <- read.csv("BERT_base_cased_Race.csv")
Gender <- read.csv("BERT_base_cased_Gender.csv")
Career <- read.csv("BERT_base_cased_Career.csv")
# Example datasets
cosine_similarities_1 <- Race$CosineSimilarity
cosine_similarities_2 <- Gender$CosineSimilarity
cosine_similarities_3 <- Career$CosineSimilarity
# Combine the datasets into a matrix
cosine_matrix <- cbind(cosine_similarities_1, cosine_similarities_2, cosine_similarities_3)
View(cosine_matrix)
# Find the overall minimum and maximum values
min_value <- min(cosine_matrix)
max_value <- max(cosine_matrix)
# Apply min-max normalization
min_max_normalized <- (cosine_matrix - min_value) / (max_value - min_value)
View(min_max_normalized)
View(Race)
# Replace the original datasets with normalized values
Race$CosineSimilarity <- min_max_normalized[, 1]
View(Race)
View(Gender)
Gender$CosineSimilarity <- min_max_normalized[, 2]
View(min_max_normalized)
View(Race)
rm(list = ls())
Race <- read.csv("BERT_base_cased_Race.csv")
Gender <- read.csv("BERT_base_cased_Gender.csv")
Career <- read.csv("BERT_base_cased_Career.csv")
Race_P <- Race %>%
filter(Good_or_Bad == "Good")
Race_U <- Race %>%
filter(Good_or_Bad == "Bad")
# Example datasets
cosine_similarities_1 <- Race_P$CosineSimilarity
cosine_similarities_2 <- Race_U$CosineSimilarity
cosine_similarities_3 <- Gender$CosineSimilarity
cosine_similarities_4 <- Career$CosineSimilarity
# Combine the datasets into a matrix
cosine_matrix <- cbind(cosine_similarities_1, cosine_similarities_2, cosine_similarities_3, cosine_similarities_4)
View(cosine_matrix)
# Find the overall minimum and maximum values
min_value <- min(cosine_matrix)
max_value <- max(cosine_matrix)
# Apply min-max normalization
min_max_normalized <- (cosine_matrix - min_value) / (max_value - min_value)
View(Race_P)
# Replace the original datasets with normalized values
Race_P$CosineSimilarity <- min_max_normalized[, 1]
View(Race_U)
Race_U$CosineSimilarity <- min_max_normalized[, 2]
Gender$CosineSimilarity <- min_max_normalized[, 3]
Career$CosineSimilarity <- min_max_normalized[, 4]
refRace <- "White"
Race$Race <- relevel(factor(Race$Race), ref = refRace)
refGender <- "M"
Gender$Gender <- relevel(factor(Gender$Gender), ref = refGender)
View(Career)
clear
